---
layout: post
title:  "JavaScript | ä¸ºä½• ['1','7','11'].map(parseInt) = [1, NaN, 3] ã€è¯‘ã€‘"
date:   2019-09-10 19:00:00 +0800
categories: javascript
header-img: "img/in-post/post-bg-js2.png"
tags:
    - javascript
---

*javascript* æ˜¯å¤æ€ªçš„ã€‚ä¸ä¿¡ğŸ¤¨ï¼Ÿè¯•ç€ç”¨`map`å’Œ`parseInt`å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„è½¬æˆæ•°å­—æ•°ç»„ã€‚å°†ä¸‹é¢çš„æ®µä»£ç è¾“å…¥åˆ°æ§åˆ¶å°(åœ¨Chromeæµè§ˆå™¨æŒ‰ F12)ï¼Œå¹¶å›è½¦ã€‚
```js
['1', '7', '11'].map(parseInt);
```
æˆ‘ä»¬å¾—åˆ°ç»“æœæ˜¯`[1, NaN, 3]`ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„`[1, 7, 11]`ã€‚ä¸ºä½•ï¼Ÿä¸ºäº†æ¢ç©¶å…¶åŸå› ï¼Œæˆ‘ä»¬å…ˆæ¢è®¨ä¸€äº›javascriptè§‚ç‚¹ã€‚å¦‚æœä½ æ˜¯ä¸ª'å¤ªé•¿ä¸çœ‹'ï¼Œå¯ä»¥ç›´æ¥åˆ°æ€»ç»“éƒ¨åˆ†ã€‚
![](/img/in-post/2019-09-10-js-map-parseInt.jpeg)  

### true æˆ–è€… false
çœ‹ä¸‹é¢è¿™ä¸ª `if-else` çš„ç®€å•æ¡ä»¶è¯­å¥ã€‚
```js
if (true) {
    // æ€»æ˜¯æ‰§è¡Œ
} else {
    // ç»å¯¹ä¸ä¼šæ‰§è¡Œ
}
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`if-else`çš„è¯­å¥æ€»æ˜¯`true`ï¼Œæ‰€ä»¥`if`ä¸‹çš„å—è¯­å¥æ€»æ˜¯æ‰§è¡Œï¼Œè€Œ`else`è¯­å¥å—ç»ä¸ä¼šæ‰§è¡Œã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œå› ä¸º`true`æ˜¯`boolean`ã€‚å¦‚æœä¸æ˜¯`boolean`ä½œä¸ºæ¡ä»¶çš„è¯ä¼šæ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ  
```js
if ("hello world") {
    // æ‰§è¡Œè¿™ä¸ªï¼Ÿ
    console.log("Condition is true");
} else {
    // è¿˜æ˜¯è¿™ä¸ªï¼Ÿ
    console.log("Condition is false");
}
```
å½“ä½ åœ¨æ§åˆ¶å°é‡Œæ‰§è¡Œåï¼Œä¼šå‘ç°`if`ä¸‹çš„è¯­å¥å—è¢«æ‰§è¡Œï¼Œè¯´æ˜`string`å¯¹è±¡`"hello world"`è½¬æˆ`boolean`å€¼ä¸º`true`ã€‚æ‰€æœ‰çš„javascriptçš„å€¼è¦ä¹ˆæ˜¯`true`è¦ä¹ˆæ˜¯`false`ã€‚å½“åœ¨ä¸€ä¸ª`boolean`ç¯å¢ƒä¸‹æ—¶ï¼Œå¦‚`if-else`ï¼Œéƒ½ä¼šè¢«è½¬æˆ`true`æˆ–`false`ã€‚é‚£ä¹ˆè¿™ä¸ªè½¬æ¢è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯ä»¥å‚è€ƒä»¥ä¸‹è¿™ä¸ªè§„åˆ™ï¼š   

> âš ï¸ é™¤äº†`false`, `0`, `""` (ç©ºå­—ç¬¦ä¸²), `null`, `undefined`, å’Œ `NaN`ï¼Œå…¶ä½™çš„å€¼éƒ½æ˜¯è½¬æˆ`true`  

ä¹Ÿå°±æ˜¯è¯´ï¼Œå­—ç¬¦ä¸²`"false"`,`"0"`,ä»¥åŠç©ºå¯¹è±¡`{}`,ç©ºæ•°ç»„`[]`éƒ½æ˜¯è¢«è½¬æˆ`true`ã€‚ä½ å¯ä»¥ç”¨`Boolean`æ–¹æ³•éªŒè¯ä¸‹ï¼Œä¾‹å¦‚`Boolean("0")`ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªæ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åªç”¨åˆ°`0`æ˜¯è½¬æˆ`false`ã€‚

### åŸºæ•°
```
0 1 2 3 4 5 6 7 8 9 10
````
å½“æˆ‘ä»¬ä»ä¸€æ•°åˆ°ä¹ï¼Œæˆ‘ä»¬æœ‰ä¸åŒçš„å­—ç¬¦è¡¨ç¤ºæ¯ä¸ªæ•°å­—(0-9)ã€‚ç„¶è€Œï¼Œå½“æ•°åˆ°åçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªå­—ç¬¦è¡¨ç¤º(1å’Œ0)ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„åè¿›åˆ¶ï¼Œä»¥10ä¸ºåŸºæ•°(radix or base)ã€‚åŸºæ•°å°±æ˜¯ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºçš„æœ€å°å•ä½çš„æ•°é‡ã€‚ä¸åŒçš„è®¡æ•°æ–¹æ³•æœ‰ä¸åŒçš„åŸºæ•°ï¼Œåœ¨ä¸åŒçš„åŸºæ•°ä¸‹ä¸€äº›ç›¸åŒçš„å­—ç¬¦è¡¨ç¤ºä¸åŒçš„æ•°å­—ã€‚  
```
åè¿›åˆ¶   äºŒè¿›åˆ¶    åå…­è¿›åˆ¶
RADIX=10  RADIX=2   RADIX=16
0         0         0
1         1         1
2         10        2
3         11        3
4         100       4
5         101       5
6         110       6
7         111       7
8         1000      8
9         1001      9
10        1010      A
11        1011      B
12        1100      C
13        1101      D
14        1110      E
15        1111      F
16        10000     10
17        10001     11
```
ä¾‹å¦‚ï¼Œçœ‹ä¸Šé¢çš„è¡¨æ ¼ï¼Œåœ¨ä¸åŒçš„åŸºæ•°è§„åˆ™å­—ç¬¦11å¯ä»¥è¡¨ç¤ºä¸åŒçš„æ•°å­—ã€‚å¦‚æœåŸºæ•°æ˜¯2ï¼Œé‚£ä¹ˆ11è¡¨ç¤ºçš„æ˜¯æ•°å­—3ï¼Œå¦‚æœåŸºæ•°æ˜¯16ï¼Œé‚£ä¹ˆè¡¨ç¤ºæ•°å­—17ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬çš„ä¾‹å­ä¸­çš„11è¢«`parseInt`åå˜æˆäº†3ï¼Œä¹Ÿå°±æ˜¯åŸºæ•°ä¸º2çš„æ—¶å€™ã€‚

### Function arguments
Javascriptä¸­çš„functionï¼Œä¸ç®¡å£°æ˜æ—¶æ˜¯å‡ ä¸ªå˜é‡ï¼Œè°ƒç”¨æ—¶å¯ä»¥ä¼ ä»»æ„ä¸ªå‚æ•°ã€‚æ²¡æœ‰ä¼ çš„é»˜è®¤ä¸º`undefined`ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è¢«å¿½ç•¥(ä½†ä¼šä¿å­˜åœ¨`arguments`å¯¹è±¡ä¸­)ã€‚  
```js
function foo(x, y) {
    console.log(x, y);
}
foo(1, 2);      // 1  2
foo(1);         // 1  undefined
foo(1, 2, 3);   // 1  2
```

### map()
`map`æ˜¯æ•°ç»„`Array`çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„å€¼æ˜¯ç”±åŸæ•°ç»„çš„æ¯ä¸€ä¸ªå€¼é€šè¿‡ä¸€ä¸ªæ–°æ–¹æ³•æ˜ å°„çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°±æ˜¯æŠŠæ•°ç»„é‡Œæ‰€æœ‰çš„æ•°ä¹˜ä»¥3ã€‚  
```js
function multiplyBy3(x) {
    return x * 3;
}
const result = [1, 2, 3, 4, 5].map(multiplyBy3);
console.log(result);   // [3, 6, 9, 12, 15];
```
ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨åˆ©ç”¨`map()`ä¼ å…¥`console.log`æ‰“å°æ‰€æœ‰å…ƒç´ ã€‚
```js
[1, 2, 3, 4, 5].map(console.log);
```
![](/img/in-post/2019-09-10-js-map-log.png)  
å“‡ğŸ¸ï¼å‘ç°æ‰“å°çš„ä¸ä»…ä»…æ˜¯æ•°å€¼ï¼Œè¿˜æ‰“å°äº†indexå’Œæ•´ä¸ªæ•°ç»„ã€‚
```js
[1, 2, 3, 4, 5].map(console.log);
// ç›¸å½“äº
[1, 2, 3, 4, 5].map(
    (val, index, array) => console.log(val, index, array)
);
// è€Œä¸æ˜¯
[1, 2, 3, 4, 5].map(
    val => console.log(val)
);
```
å½“ä¼ å…¥ä¸€ä¸ªå‡½æ•°ç»™map()æ—¶ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œéƒ½ä¼ äº†3ä¸ªå‚æ•°ç»™è¿™ä¸ªå‡½æ•°ï¼š`currentValue`(å½“å‰å€¼), `currentIndex`(å½“å‰ç´¢å¼•), å’Œ `array`(åŸæ•°ç»„)ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæ‰“å°ä¸‰ä¸ªå€¼äº†ã€‚å¥½çš„ğŸ‘Œï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»æ­å¼€éƒ¨åˆ†è°œåº•äº†ã€‚  

### ç»¼åˆèµ·æ¥çœ‹
`parseInt`éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²å’ŒåŸºæ•°ã€‚å½“åŸºæ•°ä½œä¸ºæ¡ä»¶çš„æ—¶å€™æ˜¯`false`æ—¶ï¼ŒåŸºæ•°é»˜è®¤ä¸º10ã€‚  
```js
parseInt('11');               // 11
parseInt('11', 2);            // 3
parseInt('11', 16);           // 17
parseInt('11', undefined);    // 11 (åŸºæ•° æ˜¯ false)
parseInt('11', 0);            // 11 (åŸºæ•° æ˜¯ false)
```
ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åˆ†è§£æˆ‘ä»¬çš„ä¾‹å­ï¼š  
```js
['1', '7', '11'].map(parseInt);     // [1, NaN, 3]
// ç¬¬ä¸€æ¬¡è¿­ä»£: val = '1', index = 0, array = ['1', '7', '11']
parseInt('1', 0, ['1', '7', '11']); // 1
```
å› ä¸º`Boolean(0)`ä¸º`false`ï¼Œæ‰€ä»¥é»˜è®¤çš„åŸºæ•°ä¸º10ã€‚`parseInt`åªæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ç¬¬ä¸‰ä¸ªå‚æ•°`['1', '7', '11']`è¢«å¿½ç•¥äº†ã€‚å­—ç¬¦ä¸²`'1'`åœ¨åŸºæ•°10ä¸­ä¸ºæ•°å­—1ã€‚  
```js
// ç¬¬äºŒæ¬¡è¿­ä»£: val = '7', index = 1, array = ['1', '7', '11']
parseInt('7', 1, ['1', '7', '11']); //  NaN
```
åœ¨åŸºæ•°1çš„ç³»ç»Ÿä¸­, å­—ç¬¦ `'7'` ä¸å­˜åœ¨. åƒç¬¬ä¸€æ¬¡è¿­ä»£ä¸€æ ·,æœ€åä¸€ä¸ªå‚æ•°è¢«å¿½ç•¥ã€‚æ‰€ä»¥`parseInt`ç»“æœä¸º`NaN`ã€‚  
```js
// ç¬¬ä¸‰æ¬¡è¿­ä»£: val = '11', index = 2, array = ['1', '7', '11']
parseInt('11', 2, ['1', '7', '11']);  // 3
```
åœ¨åŸºæ•°2ä¸‹(äºŒè¿›åˆ¶)ä¸‹, `'11'`è¡¨ç¤ºæ•°å­—3ã€‚æœ€åä¸€ä¸ªå‚æ•°è¢«å¿½ç•¥ã€‚  

### æ€»ç»“
`['1', '7', '11'].map(parseInt)`æ²¡æœ‰åƒé¢„æœŸä¸€æ ·æ˜¯å› ä¸º`map`åœ¨æ¯æ¬¡è¿­ä»£ä¼ äº†3ä¸ªå‚æ•°ç»™`parseInt`ã€‚ç¬¬äºŒä¸ªå‚æ•°`index`(å½“å‰ç´¢å¼•)è¢«`parseInt`ä½œä¸ºåŸºæ•°å‚æ•°äº†ã€‚æ‰€ä»¥ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²è¢«è§£ææˆä¸åŒçš„åŸºæ•°ã€‚`'7'`ç”¨åŸºæ•°1ï¼Œè¿”å›`NaN`,`'11'`ç”¨åŸºæ•°2ï¼Œè¿”å›`3`ã€‚å› ä¸º`Boolean(0)`ä¸º`false`ï¼Œ`'1'`ç”¨é»˜è®¤åŸºæ•°10ï¼Œè¿”å›`1`ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬æƒ³è¦çš„ç»“æœåº”è¯¥æ˜¯å¦‚ä¸‹ä»£ç ï¼š
```js
['1', '7', '11'].map(numStr => parseInt(numStr));
```
![](/img/in-post/2019-09-10-js-map-parseint-right.png)  

---
åŸæ–‡é“¾æ¥ğŸ”—ï¼š[https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21](https://medium.com/dailyjs/parseint-mystery-7c4368ef7b21)