---
layout: post
title:  "cocos creator | å¦‚ä½•å®ç° KTV æ­Œè¯é€å­—æ•ˆæœï¼"
date:   2019-10-25 22:22:22 +0800
header-img: "img/in-post/post-bg-cocos-creator.png"
categories: cocos-creator
tags:
    - cocos-creator
---
> å”±æ­ŒğŸ¤æ€ä¹ˆèƒ½å°‘äº†æ­Œè¯å‘¢ï¼Ÿ

# æ•ˆæœé¢„è§ˆ

å…ˆçœ‹ä¸‹å®ç°çš„æœ€ç»ˆæ•ˆæœå¦‚ä½•ã€‚   

![](/img/in-post/2019-10-25-preview.gif)

# é…ç½®ç¯å¢ƒ

cocos creator å¼•æ“ 2.0.8 + typescript

# ä½¿ç”¨æ–¹æ³•

åˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œæ·»åŠ ç»„ä»¶è„šæœ¬ï¼Œä¿®æ”¹ string å’Œ progress å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚

![](/img/in-post/2019-10-25-option.gif)

å½“ç„¶ï¼Œè¿˜æ”¯æŒè®¾ç½®æ–‡æœ¬å¤§å°ï¼Œåº•è‰²å’Œé«˜äº®å­—ä½“é¢œè‰²ã€‚

# å®ç°åŸç†

åŸæ¥æ‰“ç®—å‚è€ƒ labelOutline ç»„ä»¶å»å®ç°ï¼Œç»è¿‡å°å°ç ”ç©¶ï¼Œå‘ç°ç³»ç»Ÿå­—ä½“é‡Œçš„æè¾¹æ˜¯ç”¨ canvas çš„ strokeTextï¼Œæ‰€ä»¥é€‰äº†å¦å¤–ä¸€ä¸ªæ–¹å¼ã€‚  

æœ€ç»ˆæ–¹æ¡ˆè¿˜æ˜¯ä½¿ç”¨ cc.Mask ã€‚é¦–å…ˆåˆ›å»ºä¸¤ä¸ª Label ï¼Œä¸€ä¸ªåœ¨ä¸Šå±‚ï¼Œä¸€ä¸ªåœ¨ä¸‹å±‚ã€‚æ¥ç€ä¸ºä¸Šå±‚çš„ Label æ·»åŠ ä¸€ä¸ª Mask æ§åˆ¶æˆªå–åŒºåŸŸã€‚    

æ ¸å¿ƒä»£ç å‚è€ƒï¼š

```ts
_updateRenderData() {
    this._label_mask.lineHeight = this._label_mask.fontSize = this._label.lineHeight = this._label.fontSize = this.fontSize;
    this._label.node.color = this.color;
    this._label_mask.node.color = this.color_mask;
    this._label_mask.string = this._label.string = this._string;
    this._updateBarStatus();
}

_updateBarStatus() {
    this._node_mask.width = Math.round(this._label.node.width * this.progress);
    this._node_mask.height = this._label.node.height;
}
```

---

[æºç è·å–](https://mp.weixin.qq.com/s/os1_7hd3pZX32c128O7QGA)  